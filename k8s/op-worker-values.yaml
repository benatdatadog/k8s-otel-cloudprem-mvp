# Helm values for Datadog Observability Pipelines Worker
# Install with: helm upgrade --install op-worker -f k8s/op-worker-values.yaml datadog/observability-pipelines-worker

datadog:
  apiKey: ""  # Set via --set datadog.apiKey=<key>
  pipelineId: "7bb6858e-dad8-11f0-9319-da7ad0900002"  # Your pipeline ID from Datadog UI
  site: "datadoghq.com"

# Environment variables for pipeline configuration
# These must match the placeholders defined in your Datadog UI pipeline
env:
  - name: DD_OP_WORKER_ID
    value: "d1edd4cd-623c-445a-95ac-f924cc7b81e7"
  - name: SOURCE_OTEL_GRPC_ADDRESS
    value: "0.0.0.0:4317"
  - name: DESTINATION_CLOUDPREM_ENDPOINT_URL
    value: "http://cloudprem-indexer.cloudprem.svc.cluster.local:7280"

# Service configuration
service:
  enabled: true
  type: ClusterIP
  ports:
    - name: otlp-grpc
      port: 4317
      targetPort: 4317
      protocol: TCP
    - name: api
      port: 8686
      targetPort: 8686
      protocol: TCP

# Container ports
containerPorts:
  - name: otlp-grpc
    containerPort: 4317
    protocol: TCP
  - name: api
    containerPort: 8686
    protocol: TCP

# Resources
resources:
  requests:
    memory: "512Mi"
    cpu: "200m"
  limits:
    memory: "1Gi"
    cpu: "1000m"
